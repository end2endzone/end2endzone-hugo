{{ define "main" }}
  <article>
    <div class="post">
      {{ .Render "header" }}
	  
      {{/* end2endzone override: enable or disable share buttons on a per page setting */}}
      {{ if not ( eq .Params.share_buttons false) }}
        <div id="socnet-share">
          {{ partial "share-buttons" . }}
        </div>
      {{ end }}
	  
      <div class="content">
        {{ .Render "featured" }}
		
        {{/* end2endzone override: enable or disable table-of-contents on a per page setting */}}
        {{ if not ( eq .Params.toc false) }}
          {{ partial "toc" . }}
        {{ end }}
		
        {{ .Content }}
      </div>
      <footer>
        {{ .Render "stats" }}
      </footer>
    </div>
    {{ if not ( eq .Params.comments false) }}
      {{ .Render "comments" }}
    {{ end }}
  </article>
  <div class="pagination">
    {{ if .NextInSection }}
      <a href="{{ .NextInSection.RelPermalink }}" class="button left"><span>{{ .NextInSection.Title }}</span></a>
    {{ end }}
    {{ if .PrevInSection }}
      <a href="{{ .PrevInSection.RelPermalink }}" class="button right"><span>{{ .PrevInSection.Title }}</span></a>
    {{ end }}
  </div>

  {{/* end2endzone override: Add support for mermaid as per https://gohugo.io/content-management/diagrams/ */}}
  {{/* Mermaid url can be updated from https://www.jsdelivr.com/package/npm/mermaid */}}
 {{ if .Store.Get "hasMermaid" }}
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';
      mermaid.initialize({
        startOnLoad: true,
        securityLevel: 'loose',
        theme: 'base',
        
        // Forest color palette extracted from rendering all graphs
        // with the 'forest' theme and then extracting all colors from 
        // the generated '<style>' tags.
        // Modified with the following to properly see objects 
        // over end2endzone's background color:
        //    #333333 --> #bebebe
        //    loopTextColor: '#000000' --> '#f9f9f9'
        //    stateBkg: '#cde498' --> '#010101'
        themeVariables: {
          /* ──────────────────────────────────────────────
          * Global
          * ────────────────────────────────────────────── */
          fontFamily: '"trebuchet ms", verdana, arial, sans-serif',
          fontSize: '16px',
          background: '#ffffff',
        
          primaryColor: '#cde498',
          primaryTextColor: '#000000',
          primaryBorderColor: '#9ccc65',
        
          secondaryColor: '#EDF2AE',
          secondaryTextColor: '#000000',
          secondaryBorderColor: '#6eaa49',
        
          tertiaryColor: '#fff5ad',
          tertiaryTextColor: '#000000',
          tertiaryBorderColor: '#6eaa49',
        
          lineColor: '#bebebe',
          textColor: '#000000',
        
          /* ──────────────────────────────────────────────
          * Flowchart / Graph
          * ────────────────────────────────────────────── */
          nodeBkg: '#cde498',
          nodeTextColor: '#000000',
          nodeBorder: '#9ccc65',
        
          clusterBkg: '#EDF2AE',
          clusterBorder: '#6eaa49',
        
          edgeLabelBackground: '#ffffff',
        
          /* ──────────────────────────────────────────────
          * Sequence Diagram
          * ────────────────────────────────────────────── */
          actorBkg: '#cde498',
          actorBorder: '#9ccc65',
          actorTextColor: '#000000',
          actorLineColor: '#9ccc65',
        
          signalColor: '#bebebe',
          signalTextColor: '#bebebe',
          sequenceNumberColor: '#ffffff',
        
          labelBoxBkgColor: '#cde498',
          labelBoxBorderColor: '#326932',
          labelTextColor: '#000000',
        
          loopLineColor: '#326932',
          loopTextColor: '#f9f9f9',
        
          noteBkgColor: '#fff5ad',
          noteBorderColor: '#6eaa49',
          noteTextColor: '#000000',
        
          activationBkgColor: '#EDF2AE',
          activationBorderColor: '#666666',
        
          /* ──────────────────────────────────────────────
          * Class Diagram
          * ────────────────────────────────────────────── */
          classText: '#000000',
          classFill: '#cde498',
          classBorder: '#9ccc65',
        
          relationColor: '#bebebe',
          relationLabelBackground: '#ffffff',
        
          /* ──────────────────────────────────────────────
          * State Diagram
          * ────────────────────────────────────────────── */
          stateBkg: '#010101',
          stateBorder: '#9ccc65',
          stateText: '#000000',
          labelColor: '#000000',
          nodeLabel: '#ff0000',
        
          /* ──────────────────────────────────────────────
          * Gantt
          * ────────────────────────────────────────────── */
          gridColor: '#cccccc',
          sectionFill: '#cde498',
          sectionTextColor: '#000000',
        
          taskBkgColor: '#9ccc65',
          taskTextColor: '#000000',
          taskBorderColor: '#6eaa49',
        
          activeTaskBkgColor: '#EDF2AE',
          activeTaskBorderColor: '#6eaa49',
        
          doneTaskBkgColor: '#cccccc',
          doneTaskBorderColor: '#999999',
        
          /* ──────────────────────────────────────────────
          * Pie Diagram
          * ────────────────────────────────────────────── */
          pie1: '#cde498',
          pie2: '#9ccc65',
          pie3: '#6eaa49',
          pie4: '#EDF2AE',
          pie5: '#fff5ad',
          pie6: '#326932',
        
          /* ──────────────────────────────────────────────
          * ER Diagram
          * ────────────────────────────────────────────── */
          entityBkgColor: '#cde498',
          entityBorderColor: '#9ccc65',
          entityTextColor: '#000000',
        
          relationshipColor: '#bebebe',
        
          /* ──────────────────────────────────────────────
          * Journey Diagram
          * ────────────────────────────────────────────── */
          taskTextColor: '#000000',
          taskFillColor: '#cde498',
          taskBorderColor: '#9ccc65',
        
          /* ──────────────────────────────────────────────
          * Requirement Diagram
          * ────────────────────────────────────────────── */
          requirementBackground: '#cde498',
          requirementBorderColor: '#9ccc65',
          requirementTextColor: '#000000'
        }
      });
    </script>
  {{ end }}

{{ end }}
